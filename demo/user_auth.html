<!--不能正常使用-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Supabase Auth Demo</title>
    <script src="vue-3-supabase.umd.js"></script>
</head>
<body>
<h2>Supabase Auth Demo</h2>
<div id="auth">
    <input type="email" id="email" placeholder="Email" />
    <input type="password" id="password" placeholder="Password" />
    <button onclick="signUp()">Sign Up</button>
    <button onclick="logInWithEmail()">Log In</button>
    <button onclick="logOut()">Log Out</button>
</div>

<script>
    const supabaseUrl = 'https://cnpu0oa5g6haaugeu7ig.baseapi.memfiredb.com';
    const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImV4cCI6MzI4NzI4MTUwNSwiaWF0IjoxNzEwNDgxNTA1LCJpc3MiOiJzdXBhYmFzZSJ9.UYeItSss-F3-p9AmC77pEih3FD4_UtGMkE9LN0-YihE';
    const supabase = supabase.createClient(supabaseUrl, supabaseKey);


    async function signUp() {
        const { email, password } = getValues();
        const { data, error } = await supabase.auth.signUp({
            email: email,
            password: password
        });
        handleAuthResponse(data, error);
    }

    async function logInWithEmail() {
        const { email, password } = getValues();
        const { data, error } = await supabase.auth.signInWithPassword({
            email: email,
            password: password
        });
        handleAuthResponse(data, error);
    }

    async function logOut() {
        const { error } = await supabase.auth.signOut();
        handleAuthResponse(null, error);
    }

    function getValues() {
        return {
            email: document.getElementById('email').value,
            password: document.getElementById('password').value
        };
    }

    function handleAuthResponse(data, error) {
        if (error) {
            console.error('Error:', error);
            alert(error.message);
        } else {
            console.log('Success:', data);
            alert('Logged in successfully');
            // You can now use `data` to get user information
            // For example, to get the user's profile:
            // supabase.auth.getUser().then(({ data: { user } }) => console.log(user));
        }
    }
</script>
</body>
</html>
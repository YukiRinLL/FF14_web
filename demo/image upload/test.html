<!DOCTYPE html>
<html>
<head>
    <title>Upload Image</title>
</head>
<body>
<h2>Upload Image</h2>
<form action="/upload" method="post" enctype="multipart/form-data">
    <input type="file" id="image" name="image" accept="image/*" required>
    <input type="text" id="name" name="name" required>
    <input type="text" id="uploaded_by" name="uploaded_by" required>
    <input type="submit" value="Upload">
</form>

<script>
document.querySelector('form').addEventListener('submit', function(event) {
    event.preventDefault();
    var image = document.getElementById('image').files[0];
    var reader = new FileReader();
    reader.onloadend = function() {
        var data = reader.result;

        let imageData = window.atob(data.split(',')[1]);

        let blob = new Blob([imageData], {type: 'image/png'});
        let url = URL.createObjectURL(blob);

        let image = document.createElement('img');
        image.src = url;
        document.body.appendChild(image);


        var name = document.getElementById('name').value;
            var uploaded_by = document.getElementById('uploaded_by').value;

            var img = document.createElement('img');
            img.src = data;
            document.body.appendChild(img);

            var p = document.createElement('p');
            p.textContent = data;
            document.body.appendChild(p);
    };
    reader.readAsDataURL(image);
});

</script>

</body>
</html>
